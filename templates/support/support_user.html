
{% extends 'users/quanlytaikhoan.html' %}

{% load static %}
{% block users %}
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .card-hover { transition: all 0.3s ease; }
        .card-hover:hover { transform: translateY(-2px); box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
        .notification-dot { animation: pulse 2s infinite; }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        .sidebar-item { transition: all 0.3s ease; }
        .sidebar-item:hover { background: rgba(59, 130, 246, 0.1); }
        .sidebar-item.active { background: linear-gradient(135deg, #3b82f6, #1d4ed8); color: white; }
        .support-card {
            background: linear-gradient(135deg, #f8fafc, #e2e8f0);
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }
        .support-card:hover {
            border-color: #3b82f6;
            background: linear-gradient(135deg, #eff6ff, #dbeafe);
        }
        .faq-item {
            border-bottom: 1px solid #e5e7eb;
            transition: all 0.3s ease;
        }
        .faq-item:last-child { border-bottom: none; }
        .faq-answer {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }
        .faq-answer.open { max-height: 200px; }
    </style>
        <!-- Main Content -->
        <main class="flex-1 p-8">
            <!-- Header -->
            <div class="mb-8">
                <div class="flex items-center space-x-3 mb-4">
                    <button onclick="goBack()" class="text-gray-600 hover:text-gray-800">
                        <i class="fas fa-arrow-left text-xl"></i>
                    </button>
                    <h1 class="text-3xl font-bold text-gray-800">Hỗ trợ khách hàng</h1>
                </div>
                <p class="text-gray-600">Chúng tôi luôn sẵn sàng hỗ trợ bạn 24/7</p>
            </div>

            <!-- Quick Support -->
            <div class="grid md:grid-cols-3 gap-6 mb-8">
                <div class="support-card rounded-xl p-6 card-hover cursor-pointer" onclick="openChat()">
                    <div class="text-center">
                        <div class="w-16 h-16 bg-blue-600 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-comments text-white text-2xl"></i>
                        </div>
                        <h3 class="text-lg font-bold text-gray-800 mb-2">Chat trực tuyến</h3>
                        <p class="text-sm text-gray-600 mb-4">Trò chuyện với tư vấn viên ngay</p>
                        <div class="inline-flex items-center text-green-600 text-sm font-medium">
                            <div class="w-2 h-2 bg-green-500 rounded-full mr-2"></div>
                            Đang trực tuyến
                        </div>
                    </div>
                </div>

                <div class="support-card rounded-xl p-6 card-hover cursor-pointer" onclick="callHotline()">
                    <div class="text-center">
                        <div class="w-16 h-16 bg-green-600 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-phone text-white text-2xl"></i>
                        </div>
                        <h3 class="text-lg font-bold text-gray-800 mb-2">Hotline</h3>
                        <p class="text-sm text-gray-600 mb-4">Gọi ngay để được hỗ trợ</p>
                        <div class="text-xl font-bold text-green-600">1900 1234</div>
                    </div>
                </div>

                <div class="support-card rounded-xl p-6 card-hover cursor-pointer" onclick="sendEmail()">
                    <div class="text-center">
                        <div class="w-16 h-16 bg-purple-600 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-envelope text-white text-2xl"></i>
                        </div>
                        <h3 class="text-lg font-bold text-gray-800 mb-2">Email</h3>
                        <p class="text-sm text-gray-600 mb-4">Gửi email cho chúng tôi</p>
                        <div class="text-sm font-medium text-purple-600">support@securelife.vn</div>
                    </div>
                </div>
            </div>

            <div class="grid lg:grid-cols-2 gap-8">
                <!-- FAQ -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h2 class="text-xl font-bold text-gray-800 mb-6">Câu hỏi thường gặp</h2>

                    <div class="space-y-4">
                        <div class="faq-item">
                            <button class="w-full text-left py-4 flex items-center justify-between" onclick="toggleFAQ(this)">
                                <span class="font-semibold text-gray-800">Làm thế nào để gửi yêu cầu bồi thường?</span>
                                <i class="fas fa-chevron-down text-gray-400 transition-transform"></i>
                            </button>
                            <div class="faq-answer pb-4">
                                <p class="text-gray-600 text-sm">Bạn có thể gửi yêu cầu bồi thường qua trang web, ứng dụng di động hoặc gọi hotline. Chuẩn bị đầy đủ giấy tờ liên quan và mô tả chi tiết sự việc.</p>
                            </div>
                        </div>

                        <div class="faq-item">
                            <button class="w-full text-left py-4 flex items-center justify-between" onclick="toggleFAQ(this)">
                                <span class="font-semibold text-gray-800">Thời gian xử lý bồi thường là bao lâu?</span>
                                <i class="fas fa-chevron-down text-gray-400 transition-transform"></i>
                            </button>
                            <div class="faq-answer pb-4">
                                <p class="text-gray-600 text-sm">Thời gian xử lý từ 3-15 ngày làm việc tùy thuộc vào loại bảo hiểm và mức độ phức tạp của vụ việc. Chúng tôi sẽ thông báo tiến độ qua SMS/email.</p>
                            </div>
                        </div>

                        <div class="faq-item">
                            <button class="w-full text-left py-4 flex items-center justify-between" onclick="toggleFAQ(this)">
                                <span class="font-semibold text-gray-800">Tôi có thể thanh toán phí bảo hiểm như thế nào?</span>
                                <i class="fas fa-chevron-down text-gray-400 transition-transform"></i>
                            </button>
                            <div class="faq-answer pb-4">
                                <p class="text-gray-600 text-sm">Chúng tôi hỗ trợ thanh toán qua thẻ ATM, thẻ tín dụng, chuyển khoản ngân hàng, ví điện tử và thanh toán tại văn phòng.</p>
                            </div>
                        </div>

                        <div class="faq-item">
                            <button class="w-full text-left py-4 flex items-center justify-between" onclick="toggleFAQ(this)">
                                <span class="font-semibold text-gray-800">Làm sao để cập nhật thông tin cá nhân?</span>
                                <i class="fas fa-chevron-down text-gray-400 transition-transform"></i>
                            </button>
                            <div class="faq-answer pb-4">
                                <p class="text-gray-600 text-sm">Đăng nhập vào tài khoản, vào mục "Thông tin cá nhân" và chọn "Chỉnh sửa". Một số thông tin quan trọng cần xác thực qua OTP.</p>
                            </div>
                        </div>

                        <div class="faq-item">
                            <button class="w-full text-left py-4 flex items-center justify-between" onclick="toggleFAQ(this)">
                                <span class="font-semibold text-gray-800">Tôi quên mật khẩu, phải làm gì?</span>
                                <i class="fas fa-chevron-down text-gray-400 transition-transform"></i>
                            </button>
                            <div class="faq-answer pb-4">
                                <p class="text-gray-600 text-sm">Nhấn "Quên mật khẩu" tại trang đăng nhập, nhập email/số điện thoại đã đăng ký. Chúng tôi sẽ gửi link đặt lại mật khẩu.</p>
                            </div>
                        </div>
                    </div>

                    <div class="mt-6 text-center">
                        <button class="text-blue-600 hover:text-blue-700 font-medium" onclick="viewAllFAQ()">
                            Xem tất cả câu hỏi <i class="fas fa-arrow-right ml-1"></i>
                        </button>
                    </div>
                </div>

                <!-- Contact Form -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h2 class="text-xl font-bold text-gray-800 mb-6">Gửi câu hỏi</h2>

                    <form class="space-y-4" onsubmit="submitQuestion(event)">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Chủ đề</label>
                            <select class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" required>
                                <option value="">Chọn chủ đề</option>
                                <option value="claim">Bồi thường</option>
                                <option value="payment">Thanh toán</option>
                                <option value="contract">Hợp đồng</option>
                                <option value="account">Tài khoản</option>
                                <option value="other">Khác</option>
                            </select>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Tiêu đề</label>
                            <input type="text" placeholder="Nhập tiêu đề câu hỏi" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" required>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Nội dung</label>
                            <textarea rows="4" placeholder="Mô tả chi tiết câu hỏi của bạn..." class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" required></textarea>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Đính kèm file (tùy chọn)</label>
                            <div class="border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:border-blue-500 transition cursor-pointer" onclick="document.getElementById('fileInput').click()">
                                <i class="fas fa-cloud-upload-alt text-gray-400 text-2xl mb-2"></i>
                                <p class="text-sm text-gray-600">Nhấn để chọn file hoặc kéo thả vào đây</p>
                                <input type="file" id="fileInput" class="hidden" multiple accept=".pdf,.jpg,.jpeg,.png,.doc,.docx">
                            </div>
                        </div>

                        <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-lg font-medium transition">
                            <i class="fas fa-paper-plane mr-2"></i>Gửi câu hỏi
                        </button>
                    </form>

                    <!-- Quick Links -->
                    <div class="mt-6 pt-6 border-t border-gray-200">
                        <h3 class="font-semibold text-gray-800 mb-3">Liên kết hữu ích</h3>
                        <div class="space-y-2">
                            <a href="#" class="block text-blue-600 hover:text-blue-700 text-sm">
                                <i class="fas fa-file-alt mr-2"></i>Hướng dẫn sử dụng
                            </a>
                            <a href="#" class="block text-blue-600 hover:text-blue-700 text-sm">
                                <i class="fas fa-download mr-2"></i>Tải ứng dụng di động
                            </a>
                            <a href="#" class="block text-blue-600 hover:text-blue-700 text-sm">
                                <i class="fas fa-map-marker-alt mr-2"></i>Địa chỉ văn phòng
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        function goBack() {
            window.history.back();
        }
        function callHotline() {
            if (confirm('📞 Bạn có muốn gọi đến hotline 1900 1234?')) {
                alert('Đang kết nối...\n\nGiờ làm việc: 24/7\nPhí cuộc gọi theo tarif nhà mạng');
            }
        }

        function sendEmail() {
            alert('📧 Mở ứng dụng email để gửi đến support@securelife.vn...');
        }

        function toggleFAQ(button) {
            const answer = button.nextElementSibling;
            const icon = button.querySelector('i');

            // Close all other FAQ items
            document.querySelectorAll('.faq-answer').forEach(item => {
                if (item !== answer) {
                    item.classList.remove('open');
                    item.previousElementSibling.querySelector('i').style.transform = 'rotate(0deg)';
                }
            });

            // Toggle current FAQ item
            answer.classList.toggle('open');
            icon.style.transform = answer.classList.contains('open') ? 'rotate(180deg)' : 'rotate(0deg)';
        }

        function viewAllFAQ() {
            alert('📚 Chuyển đến trang FAQ đầy đủ với hơn 50 câu hỏi thường gặp...');
        }

        function submitQuestion(event) {
            event.preventDefault();

            const form = event.target;
            const submitBtn = form.querySelector('button[type="submit"]');
            const originalText = submitBtn.innerHTML;

            // Show loading state
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Đang gửi...';
            submitBtn.disabled = true;

            setTimeout(() => {
                alert('✅ Câu hỏi đã được gửi thành công!\n\nMã ticket: #SUP2024001\nThời gian phản hồi dự kiến: 2-4 giờ\n\nChúng tôi sẽ gửi phản hồi qua email.');

                // Reset form
                form.reset();
                submitBtn.innerHTML = originalText;
                submitBtn.disabled = false;
            }, 2000);
        }

        // File upload handling
        document.getElementById('fileInput').addEventListener('change', function(e) {
            const files = e.target.files;
            if (files.length > 0) {
                const fileNames = Array.from(files).map(file => file.name).join(', ');
                const uploadArea = e.target.parentElement;
                uploadArea.innerHTML = `
                    <i class="fas fa-check-circle text-green-600 text-2xl mb-2"></i>
                    <p class="text-sm text-green-600 font-medium">${files.length} file đã chọn</p>
                    <p class="text-xs text-gray-500">${fileNames}</p>
                `;
            }
        });

        // Notification bell
        document.querySelector('.fa-bell').closest('button').addEventListener('click', function() {
            alert('🔔 Bạn có 1 thông báo mới:\n• Câu hỏi #SUP2024001 đã được trả lời');
        });
    </script>

{% endblock %}